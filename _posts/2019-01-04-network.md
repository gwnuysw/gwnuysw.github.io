---
layout: post
title:  "Packet Tracer 이용하여 디폴트 라우팅 설정하기"
date:   2019-01-04 10:57:00 +0900
categories: jekyll update
comments : true
---

![전체구도](https://github.com/gwnuysw/gwnuysw.github.io/blob/master/_images/packetTracer/pt2/%EC%A0%84%EC%B2%B4%EA%B5%AC%EB%8F%84.png?raw=true)

지난 시간에 했던 네트워크를 하나더 구축해서 디폴트 라우팅 설정을 해보려고 합니다.

그림 상에서 위의 네트워크 설정은 지난시간과 동일하고 아래쪽 네트워크의 ip설정과 라우팅 설정을 모두 바꿔 줍니다.

- 네트워크 6
  - 192.168.6.1 / 255.255.255.0
  - 192.168.6.2 / 255.255.255.0
- 네트워크 7
  - 192.168.7.1 / 255.255.255.0
  - 192.168.7.2 / 255.255.255.0
- 네트워크 8
  - 192.168.8.1 / 255.255.255.0
  - 192.168.8.2 / 255.255.255.0
- 네트워크 9
  - 192.168.9.1 / 255.255.255.0
  - 192.168.9.2 / 255.255.255.0
- 라우터 3
  - 이더넷 인터페이스
    - 192.168.6.254 / 255.255.255.0
    - 192.168.7.254 / 255.255.255.0
  - 시리얼 인터페이스
    - 192.168.5.3 / 255.255.255.0
- 라우터 4
  - 이더넷 인터페이스
    - 192.168.8.254 / 255.255.255.0
    - 192.168.9.254 / 255.255.255.0
  - 시리얼 인터페이스
    - 192.168.5.4 / 255.255.255.0
    - **210.180.100.178 / 255.255.255.252**

라우터 4의 시리얼 인터페이스가 하나 더 추가되었습니다. 이것은 위쪽의 네트워크와 연결하기 위한 작업입니다.
따라서 위쪽네트워크의 라우터 2도 시리얼 인터페이스의 ip를 `210.180.100.177/255.255.255.252`로 할당해 줍니다.

### 라우팅 설정

그리고 디폴트 라우팅을 해줘야 하는데 디폴트 라우팅이란 패킷이 디폴트로 흘러가는 경로를 말합니다. 즉, '경로를 찾지 못하는 패킷들은 모두 이곳으로 모여라'라는 뜻이죠. 그런데 이 디폴트 라우팅 설정이 static 라우팅 설정과 크게 다르지 않습니다.

위쪽 네트워크에서 오른쪽 라우터를 설정하면
```
Router(config)# ip route 0.0.0.0 0.0.0.0 210.180.100.178
```
하지만 아래 네트워크에서 오른쪽 라우터를
```
Router(config)# ip route 0.0.0.0 0.0.0.0 210.180.100.177
```
이렇게 설정하면 라우팅이 제대로 되지 않습니다. 이유는 모르겠지만 디폴드 라우팅은 단방향 인것 같습니다. 따라서 한쪽은 static라우팅으로 경로 설정을 해야합니다.

```
Router(config)#ip route 192.168.1.0 255.255.255.0 210.180.100.177
Router(config)#ip route 192.168.2.0 255.255.255.0 210.180.100.177
Router(config)#ip route 192.168.3.0 255.255.255.0 210.180.100.177
Router(config)#ip route 192.168.4.0 255.255.255.0 210.180.100.177
```

이렇게 설정하면 됩니다. 디폴트 라우팅은 외부 네트워크로 나가는 패킷의 경로를 말합니다. 예를 들면 피씨방에 내부 네트워크가 있지만 피씨방에서 외부 인터넷에 접속할때 패킷이 이 디폴트 라우팅을 통해 외부로 나가는 것입니다. 방금 구축한 네트워크의 경우 위쪽 네트워크가 pc방 아래가 인터넷이라고 생각하면 될 것 같습니다. 디폴트 라우팅이 왜 한쪽만 되는지 아시면 댓글로 알려주세요 수정하겠습니다.
